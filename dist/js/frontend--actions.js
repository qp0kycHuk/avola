const _core={jk:{}},states={start:"start",end:"end",canceled:"canceled"},Actions={jk:()=>{let e,t,n,o;function c(){_core.jk[o]||(_core.jk[o]={}),e=document.querySelector('[data-id="'+o+'"]'),t=e.querySelector(".card"),n=e.querySelector(".jk-return-time")}function a(c){e.classList.add("before-remove"),hide(t),_core.jk[o].state=states.start,_core.jk[o].removeTimeout=setTimeout((()=>{e.classList.add("after-remove"),i(c)}),7e3),c.startAction&&c.startAction(),startСounting(n,7e3,o)}function i(t){_core.jk[o].state!=states.canceled&&(_core.jk[o].state=states.end,t.finishAction&&t.finishAction(),setTimeout((()=>{e.parentNode.removeChild(e)}),1e3))}function r(n){clearTimeout(_core.jk[o].removeTimeout),clearInterval(_core.jk[o].countingInterval),_core.jk[o].state=states.canceled,n.cancelAction&&n.cancelAction(),show(t),e.classList.remove("before-remove")}return{remove:function(e){o=e,c();const t={startAction:()=>{},finishAction:()=>{console.log("remove"),fetch("/local/ajax/remove_obj.php?id="+o).then((e=>e.text())).then((e=>{console.log(e)}))},cancelAction:()=>{}};return{finish:()=>i(t),cancel:()=>r(t),start:()=>a(t)}},archive:function(e,t){o=e,c();const n={startAction:()=>{},finishAction:()=>{console.log("archive"),fetch("/local/ajax/toarchive.php?id="+o+"&status="+t.status+"&comment="+t.comment).then((e=>e.text())).then((e=>{console.log(e)}))},cancelAction:()=>{}};return{finish:()=>i(n),cancel:()=>r(n),start:()=>a(n)}}}}};function hide(e){$?(e.style.maxHeight=e.scrollHeight+"px",$(e).animate({maxHeight:"0"},500)):e.style.maxHeight="0"}function show(e){$?$(e).animate({maxHeight:e.scrollHeight},500):e.style.maxHeight=e.scrollHeight+"px"}function startСounting(e,t,n){let o=t;e.textContent=o/1e3,_core.jk[n].countingInterval=setInterval((()=>{e.textContent=o/1e3,o-=1e3,o<=0&&(o=0)}),1e3)}