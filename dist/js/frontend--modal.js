!function(){const t="active",e="data-modal-link",o="data-modal-cover",s="data-modal-close";function i(){return{hidden:function(){document.body.style.paddingRight=function(){let t=document.createElement("div");t.style.overflowY="scroll",t.style.width="50px",t.style.height="50px",document.body.append(t);let e=t.offsetWidth-t.clientWidth;return t.remove(),e}()+"px",document.body.style.overflow="hidden"},visible:function(){document.body.style.paddingRight="",document.body.style.overflow=""}}}class n{constructor(t){this.id=t,this.opened=!1,this.closePromiseResolve=null}open(e,o){if(this.opened)return;const s=document.getElementById(this.id);if(!s)return void console.error('Modal with id = "'+this.id+'" not found!!!');this.opened=!0,s.classList.add(t),s.showModal&&s.showModal(),i().hidden(),!this.modalHistory.includes(this.id)&&this.modalHistory.push(this.id);const n=function(){const t=document.querySelectorAll("[data-modal-cover].active");let e=-1;for(const o in t){if(!t.hasOwnProperty(o))continue;const s=getComputedStyle(t[o]).zIndex;e=s>e?s:e}return+e}();s.style.zIndex=n>0?n+1:"",window.location.href="#"+this.id,this.closePromise=new Promise((t=>{this.closePromiseResolve=t}));var l=new CustomEvent("modalopen",{bubbles:!0,cancelable:!0,detail:{closePromise:this.closePromise,target:s,link:o,options:e}});o&&o.dispatchEvent(l),s.dispatchEvent(l)}close(e,o){if(!this.opened)return;const s=document.getElementById(this.id);if(s){this.opened=!1,s.classList.remove(t),s.close&&s.close(),o||history.back(),this.modalHistory.pop(),this.modalHistory.length>=1&&(window.location.hash="#"+this.modalHistory[this.modalHistory.length-1]),setTimeout((function(){s.style.zIndex="",document.querySelector("[data-modal-cover].active")||i().visible()}),250);var n=new CustomEvent("modalclose",{bubbles:!0,cancelable:!0,detail:{target:s,options:e}});s.dispatchEvent(n),this.closePromiseResolve(e)}else console.error('Modal with id = "'+this.id+'" not found!!!')}}n.prototype.modalHistory=[],n.prototype.instances={},n.create=function(t){return this.prototype.instances[t]||(this.prototype.instances[t]=new n(t)),this.prototype.instances[t]},n.open=function(t,e,o){return n.create(t).open(e,o)},n.close=function(t,e,o){return n.create(t).close(e,o)},n.clickHandler=function(t){let i=t.target;const l=function(){const t=i.closest("["+e+"]").getAttribute(e);n.open(t,null,i.closest("["+e+"]"))},d=function(){if(null==i.getAttribute(o)&&!i.closest("["+s+"]"))return;const t=i.closest("["+o+"]").id;let e=i.closest("["+s+"]")?i.closest("["+s+"]").getAttribute(s):null;n.close(t,e)};if(i.closest("["+o+"]")&&i.closest("["+e+"]"))return d(),void setTimeout((()=>{l()}),100);i.closest("["+o+"]")&&d(),i.closest("["+e+"]")&&l()},n.keyupHandler=function(t){"Escape"==t.key&&n.prototype.modalHistory.length>=1&&n.close(this.prototype.modalHistory[this.prototype.modalHistory.length-1])},n.hashChangeHandler=function(t){this.prototype.modalHistory[this.prototype.modalHistory.length-1]&&window.location.hash!=this.prototype.modalHistory[this.prototype.modalHistory.length-1]&&window.location.hash!="#"+this.prototype.modalHistory[this.prototype.modalHistory.length-1]&&this.close(this.prototype.modalHistory[this.prototype.modalHistory.length-1],null,!0)},document.addEventListener("click",(t=>n.clickHandler(t))),window.addEventListener("hashchange",(t=>n.hashChangeHandler(t))),document.addEventListener("keyup",(t=>n.keyupHandler(t))),window.Modal=n}();